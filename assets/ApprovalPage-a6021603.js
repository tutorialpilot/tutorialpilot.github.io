import{r as a,j as e}from"./index-8f3f92da.js";import{f as r,d as h}from"./firebase-560709da.js";r.auth().logLevel="debug";function E(){const[n,u]=a.useState(null),[p,o]=a.useState([]),[c,x]=a.useState(""),[d,m]=a.useState("");a.useEffect(()=>{r.auth().onAuthStateChanged(u)},[]),a.useEffect(()=>{n&&h.collection("tutorials").where("approved","==",!1).get().then(s=>{const t=[];s.forEach(l=>{t.push({id:l.id,...l.data()})}),o(t)})},[n]);const g=(s,t)=>{h.collection("tutorials").doc(s).update({approved:t}).then(()=>{o(l=>l.map(i=>i.id===s?{...i,approved:t}:i))})},j=()=>{r.auth().signOut()},f=s=>{s.preventDefault(),r.auth().signInWithEmailAndPassword(c,d).catch(t=>{console.error(t)})};return n?e.jsxs("div",{children:[e.jsx("h1",{children:"Approval Page"}),e.jsxs("p",{children:["Welcome, ",n.email,"!"]}),e.jsx("button",{onClick:j,children:"Logout"}),e.jsx("ul",{children:p.map(s=>e.jsxs("li",{children:[e.jsx("input",{type:"checkbox",checked:s.approved,onChange:t=>g(s.id,t.target.checked)}),e.jsx("span",{children:s.title})]},s.id))})]}):e.jsxs("div",{children:[e.jsx("h1",{children:"Login"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{className:"text-black",type:"email",name:"email",value:c,onChange:s=>x(s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Password:"}),e.jsx("input",{className:"text-black",type:"password",name:"password",value:d,onChange:s=>m(s.target.value),required:!0})]}),e.jsx("button",{type:"submit",children:"Login"})]})]})}export{E as default};
